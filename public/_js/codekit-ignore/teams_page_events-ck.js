$(function(){function e(e){return e.attr("contenteditable")=="true"?!0:!1}function t(t){e(t)?t.attr("contenteditable","false"):t.attr("contenteditable","true")}function n(e,t){$("form#delete-team-form").off("click").on("click",function(n){console.log("delete-team confirmed");$.ajax({url:t,type:"DELETE",dataType:"json"}).done(function(){console.log("delete successful");e.parent().remove()}).fail(function(e){console.log("error:\n",e);alert("error:\n",e)}).always(function(){$("a.close-reveal-modal").trigger("click")})})}$(".team-edits").hide();$("ul#teams-list").on("click","a.edit-team",function(n){var r=$(this);console.log(r);var i=$(this).closest("li").find("h3"),s=i.text();t(i);if(e(i)){$(this).closest("li").find(".team-buttons").hide();$(this).closest("li").find(".team-edits").show()}});$("a.cancel-team").on("click",function(){document.execCommand("undo");$(this).closest("li").find("h3").attr("contenteditable","false");$(this).closest("li").find(".team-buttons").show();$(this).closest("li").find(".team-edits").hide()});$("a.save-team").on("click",function(){var e=$("#school-name").text(),t=$(this).closest("li").find("h3").text(),n=$(this).closest("li").find("span").text();console.log("school: "+e+"\n team: "+"team"+"\n gender: "+n);$.ajax({url:"/",data:data,type:"post"});$(this).closest("li").find("h3").attr("contenteditable","false");$(this).closest("li").find(".team-buttons").show();$(this).closest("li").find(".team-edits").hide()});$("a#delete-team").on("click",function(e){console.log("clicked delete");e.preventDefault();var t,r,i,s,o=$(this);console.log(o.closest("li").find("h3").text());t=$("#school-name").text();r=o.closest("li").find("h3").text();i=o.closest("li").find("span").text();s="/"+t+"/"+r+"-"+i;console.log("url:\n",s);$("#deleteModal.reveal-link").trigger("click");n(o,s)});var r=$("#teams-list h3").map(function(){return $(this).text()}).get(),i=$("#school-name").text();$("#create-team-submit").on("click",function(e){console.log("clicked from "+this);var t,n,s,o;t=$(this);n=$("#team-name").val();s=$("#team-gender").val();o="/"+i+"/teams/"+n+"-"+s;console.log("teamsArray:"+r);console.log($.inArray(n,r));$.ajax({url:o,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json"}).done(function(e){console.log("data saved: "+e);$("#teams-list").append("<li><h3 class='capitalize'>"+e.name+"</h3><span class='capitalize'>"+e.gender+"</span></li>");$("a.close-reveal-modal").trigger("click")}).fail(function(e){console.log("failure: "+e);console.dir(e)}).always(function(){})})});